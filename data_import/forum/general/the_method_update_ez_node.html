<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">



<!-- Mirrored from projects.ez.no/data_import/forum/general/the_method_update_ez_node by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 08 Feb 2017 08:30:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>                                                                                
<title>
            The method update_eZ_node     /         General     /         Forum        
</title>

<meta http-equiv="Content-Language" content="en-GB" />
    <meta name="author" content="eZ Systems" />
    <meta name="copyright" content="eZ Systems" />
    <meta name="description" content="Content Management System" />
    <meta name="keywords" content="cms, publish, e-commerce, content management, development framework" />

<meta name="MSSmartTagsPreventParsing" content="TRUE" />
<meta name="generator" content="eZ Publish" />

<style type="text/css">
    @import url(../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/core.css);
    @import url(../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/pagelayout.css);
    @import url(../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/classes.css);
    @import url(../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/print.css) print;
</style>

<link type="text/css" rel="stylesheet" href="../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/ie5.css);    </style> <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/ie6lte.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/ie6.css);    </style> <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/gecko.css);</style>");--></script>

<script type="text/javascript" src="../../../extension/ezprojects2007/design/ezprojects2007/javascripts/switch-width.js"></script>

<script type="text/javascript" src="../../../extension/ezprojects2007/design/ezprojects2007/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../extension/ezprojects2007/design/ezprojects2007/javascripts/insertmedia.js"></script>
<script type="text/javascript" src="../../../extension/ezprojects2007/design/ezprojects2007/javascripts/link-target.js"></script>

<script type="text/javascript" src="../../../var/plain_site/cache/public/javascript/059cd8e3b9fa455a526077cbccc48048.js" charset="utf-8"></script>


</head>
<body onload="menuInit();">

<!-- Complete page area: START -->
<div id="page">

<!-- Header area: START -->
<div id="header">
<div id="header-insert">

<!-- User menu area: START -->
<div id="usermenu">

<div id="page-width1">

<div id="logo">
<h1><a href="../../../index.html"><span class="hide">eZ Systems</span></a></h1>
</div>

<h2 id="slogan">Share your information</h2>

<p class="hide"><a href="#main">Skip to main content</a></p>

<hr class="hide" />
<div id="searchbox">
<form action="http://projects.ez.no/content/advancedsearch" method="get">

<div class="block">
<div class="element">
<input id="searchbutton" class="button" type="submit" value="Search" />
</div>

<div class="element searchstring">
    <label for="searchtext" class="hide">Search text:</label>
    <input id="searchtext" name="SearchText" type="text" size="12" />
    

    </div>

</div>
</form>
</div>

<hr class="hide" />
<h2 class="hide">User menu</h2>

<!-- User menu content: START -->
<ul>
            <li><a href="http://login.ez.no/register?return=http://projects.ez.no/ezpmemberreport">Become a member of the eZ Community</a></li>
        <li><a href="http://login.ez.no/forgotpassword?return=http://projects.ez.no/ezdbintegrity/news/ez_db_integrity_0_1_finally_available">Lost password?</a></li>
    
    <li>
    
    <script type="text/javascript">
    <!--
    if ( fixedSize )
    {
        document.write('<a id="setwidth" href="#" onclick="setWidth(); return false;">Dynamic width</a>');
    }
    else
    {
        document.write('<a id="setwidth" href="#" onclick="setWidth(); return false;">Fixed width</a>');
    }
    -->
    </script>
    
    </li>
    
            <li><a href="http://login.ez.no/login?return=http://projects.ez.no/">Log in</a></li>
    </ul>
<!-- User menu content: END -->

</div>

</div>
<!-- User menu area: END -->

</div>
</div>
<!-- Header area: END -->

                    
<script type="text/javascript">
<!--
var menu = new Array();

menu[0] = [];
menu[1] = [];
menu[2] = [];
menu[3] = ['General', '/data_import/forum/general', 'Example Source Handler', '/data_import/forum/example_source_handler'];
menu[4] = ['Leaders', '/data_import/team/leaders', 'Members', '/data_import/team/members'];
menu[5] = [];
menu[6] = [];
menu[7] = [];

-->
</script>
<div id="menuborder">

<!-- Main menu area: START -->
<div id="menu" onmouseover="menuHover();" onmouseout="tryHideSubMenues();">

<div id="mainmenu" class="float-break">
<div id="page-width2">
    <ul id="mainmenulist" class="float-break">

    <li class="project" ><a href="../../../data_import.html" onmouseover="switchSubMenu( this );">Data Import &nbsp;&nbsp;&gt;&gt;</a></li>
                        <li ><a href="../../news.html" onmouseover="switchSubMenu( this );">News</a></li>
                            <li ><a href="../../downloads.html" onmouseover="switchSubMenu( this );">Downloads</a></li>
                            <li class="current"><a href="../../forum.html" onmouseover="switchSubMenu( this );">Forum</a></li>
                            <li ><a href="../../team.html" onmouseover="switchSubMenu( this );">Team</a></li>
                            <li ><a href="../../subversion.html" onmouseover="switchSubMenu( this );">Source</a></li>
                            <li ><a href="../../gallery.html" onmouseover="switchSubMenu( this );">Gallery</a></li>
                            <li class="last"><a href="../../reviews.html" onmouseover="switchSubMenu( this );">Reviews</a></li>
        
    </ul>

</div>
</div>


<div id="submenu">
<div id="page-width3">
    <ul class="float-break">

            
            
    <li class="current"><a href="../general.html">General</a></li>

                        
    
    <li class="last"><a href="../example_source_handler.html">Example Source Handler</a></li>

        

</ul>
</div>
</div>

<script type="text/javascript"><!--
document.getElementById('submenu').style.display = 'none';
--></script>

</div>
<!-- Main menu area: END -->

</div>

<hr class="hide" />
<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p>
                                    <a href="../../../content/view/full/2.html">ez projects</a>
                    
                        /
                            <a href="../../../data_import.html">data_import</a>
        
                        /
                            <a href="../../forum.html">forum</a>
        
                        /
                            <a href="../general.html">general</a>
        
                        /
                                        the method update_ez_node
                    
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->

<div id="page-width5">
<div id="main" class="float-break">

<!-- Main area content: START -->




<div class="template-design area-main-full">
<div class="template-module content-view-full">
<div class="template-object class-forummessage">



<div id="top" class="attribute-heading">
    <h1>The method update_eZ_node</h1>
</div>


    <p>You need to be <a href="http://login.ez.no/login?return=http://projects.ez.no/">logged in</a> to post messages in the forums. New users may <a href="http://auth.ez.no/user/register">register here</a>.</p>


 



<div class="content-view-children">

<table class="forum list" cellspacing="0">

    




<tr class="bglight" id="msg11170">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/bin_liu2.html">Bin LIU</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../var/plain_site/storage/images/users/community/bin_liu2/20888-25-eng-GB/bin_liu_small.jpg" width="100" height="75"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />11 May 2007</p>
        <p class="posts">Posts: 15</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Thursday 28 August 2008 1:33:37 pm</p>

        <div class="attribute-long">Hi Philipp,<br />
<br />
It's a good extension, and I'm using it. I want to know when the method update_eZ_node will be done ?<br />
<br />
And I make a LaAbstractClass for my project, maybe you can add it in the project. Can I join in your team ?<br />
<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">&lt;?php</span>

<span class="line">/*</span>

<span class="line">&nbsp;* LaAbstractClass</span>

<span class="line">&nbsp;* LIU Bin&nbsp;</span>

<span class="line">&nbsp;* <a href='mailto:bin.liu@lagardere-active.com'>bin.liu@lagardere-active.com</a></span>

<span class="line">* */</span>

<span class="line">class LaAbstractClass extends XmlHandlerPHP5</span>

<span class="line">{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public $handlerTitle ;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $current_loc_info = array();</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $logfile ;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $parent_node_id;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $section_id = 1;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $ini;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $file;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $remote_identify;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $xml_root;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $class_idendify;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $mappingTable;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function setFile($file)</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;file = $file;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// mapping for xml field name and attribute name in ez publish</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function geteZAttributeIdentifierFromField()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$field_name = $this-&gt;current_field-&gt;tagName;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$mappingData = $this-&gt;ini-&gt;variable(&quot;mappingAttributeName&quot;, $this-&gt;mappingTable);</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return isset($mappingData[$field_name]) ? $mappingData[$field_name] : false;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// handles xml fields before storing them in ez publish</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function&nbsp;getValueFromField()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;current_field-&gt;nodeValue;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// logic where to place the current content node into the content tree</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function&nbsp;getParentNodeId()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;parent_node_id;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function&nbsp;getSectionId()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;section_id;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function setParentNodeId($parent_node_id)</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;parent_node_id = $parent_node_id;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function&nbsp;getDataRowId()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$remote_id = $this-&gt;current_row-&gt;firstChild-&gt;nextSibling-&gt;nextSibling-&gt;nextSibling-&gt;nodeValue;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;remote_identify.$remote_id;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function readData()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;parse_xml_document( $this-&gt;file , $this-&gt;xml_root );</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function post_publish_handling( $eZ_object, $force_exit )</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$force_exit = false;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function getTargetContentClass()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;class_idendify;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">}</span>

<span class="line">&nbsp;</span>

<span class="line">?&gt;</span>

<span class="line"></span></pre><br />
<br />
and for each class, like image, disporama, etc.<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">&lt;?php</span>

<span class="line">class Diaporama extends LaAbstractClass</span>

<span class="line">{</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public $xml_root = &quot;diaporamas&quot;;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected $class_idendify = &quot;diaporama&quot;;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function __construct()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;handlerTitle = __CLASS__.&quot; Handler&quot;;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;logfile = __CLASS__.&quot;_import.log&quot;;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;remote_identify = __CLASS__.&quot;_xml_&quot;;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;ini = new eZINI(&quot;import.ini.append.php&quot;);</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;parent_node_id = $this-&gt;ini-&gt;variable(&quot;ParentNodeId&quot;,__CLASS__);</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;mappingTable&nbsp;= &quot;mapping&quot;.__CLASS__;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// handles xml fields before storing them in ez publish</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function&nbsp;getValueFromField()</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch( $this-&gt;current_field-&gt;tagName )</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 'diaporama_id':</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$id = preg_replace(&quot;/[_a-z]/&quot;,&quot;&quot;,$this-&gt;current_field-&gt;nodeValue);</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $id;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;current_field-&gt;nodeValue;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">}</span>

<span class="line">?&gt;</span>

<span class="line"></span></pre><br />
<br />
My import.ini<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">&lt;?php /* #?ini charset=&quot;utf-8&quot;?</span>

<span class="line">&nbsp;</span>

<span class="line">[UserSettings]</span>

<span class="line">UserCreatorID=4769</span>

<span class="line">&nbsp;</span>

<span class="line">[ParentNodeId]</span>

<span class="line">Diaporama=5929</span>

<span class="line">Personnalite=5931</span>

<span class="line">&nbsp;</span>

<span class="line">[mappingAttributeName]</span>

<span class="line">#mappingClassName[xmlAttributeName]=ezAttributeName</span>

<span class="line">mappingDiaporama[diaporama_id]=id_source</span>

<span class="line">mappingDiaporama[diaporama_titre]=titre</span>

<span class="line">&nbsp;</span>

<span class="line">mappingPersonnalite[personne_id]=id_source</span>

<span class="line">mappingPersonnalite[personne_plurimediaid]=plurimedia_id</span>

<span class="line">mappingPersonnalite[personne_prenom]=prenom</span>

<span class="line">mappingPersonnalite[personne_nom]=nom</span>

<span class="line">&nbsp;</span>

<span class="line">[Path]</span>

<span class="line">PathIn=extension/data_import/dataSource/importIn/</span>

<span class="line">PathOut=extension/data_import/dataSource/importOut/</span>

<span class="line">FilePrefix=premiere-</span>

<span class="line">&nbsp;</span>

<span class="line">*/ ?&gt;</span></pre>
</div>
                    <div class="attribute-signature">
            <p>=== Freelance Expert Ezpublish ===</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.html" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>
    




<tr class="bgdark" id="msg11171">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/bin_liu2.html">Bin LIU</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../var/plain_site/storage/images/users/community/bin_liu2/20888-25-eng-GB/bin_liu_small.jpg" width="100" height="75"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />11 May 2007</p>
        <p class="posts">Posts: 15</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Thursday 28 August 2008 1:38:53 pm</p>

        <div class="attribute-long">Add create user, because now the create user is anonymous.<br />
In importOperator.php<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">public $user_id = 14; //by default admin</span>

<span class="line">&nbsp;</span>

<span class="line">public function setUserId($id)</span>

<span class="line">{</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;user_id = $id;</span>

<span class="line">}</span>

<span class="line">&nbsp;</span>

<span class="line">function setNodesPriority()</span>

<span class="line">{</span>

<span class="line">*****&nbsp;&nbsp;&nbsp;</span>

<span class="line">$eZ_object = $eZClass-&gt;instantiate( $this-&gt;user_id, $this-&gt;source_handler-&gt;getSectionId());</span>

<span class="line">*****</span>

<span class="line">}</span>

<span class="line"></span></pre><br />
<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">$ini = new eZINI(&quot;import.ini.append.php&quot;);</span>

<span class="line">$userCreatorID = $ini-&gt;variable(&quot;UserSettings&quot;,&quot;UserCreatorID&quot;);</span>

<span class="line">&nbsp;</span>

<span class="line">$handler = new Diaporama();</span>

<span class="line">$operator = new ImportOperator( $handler );</span>

<span class="line">$operator-&gt;setUserId($userCreatorID);</span>

<span class="line">$operator-&gt;run();</span>

<span class="line"></span></pre><br />

</div>
                    <div class="attribute-signature">
            <p>=== Freelance Expert Ezpublish ===</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.html" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg11172">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/bin_liu2.html">Bin LIU</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../var/plain_site/storage/images/users/community/bin_liu2/20888-25-eng-GB/bin_liu_small.jpg" width="100" height="75"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />11 May 2007</p>
        <p class="posts">Posts: 15</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Thursday 28 August 2008 1:39:07 pm</p>

        <div class="attribute-long">And a little bug<br />
add static for the function HandleXmlError<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">static function HandleXmlError($errno, $errstr, $errfile, $errline)</span>

<span class="line"></span></pre><br />

</div>
                    <div class="attribute-signature">
            <p>=== Freelance Expert Ezpublish ===</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.html" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bgdark" id="msg11199">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/philipp_kamps.html">Philipp Kamps</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../var/plain_site/storage/images/users/community/philipp_kamps/50596-6-eng-GB/philipp_kamps_small.html" width="66" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />16 June 2006</p>
        <p class="posts">Posts: 13</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Friday 29 August 2008 8:20:18 pm</p>

        <div class="attribute-long">LIU Bin,<br />
<br />
I really like the idea to be able to set the owner of imported objects. I will add a method to the SourceHandler to get the owner info -- per default it will read the config file to get it. But you would be able to override the method in your custom import scripts to determine the owner for each imported object.<br />
<br />
I just had a quick look to your abstract handler - I'm not sure why you want me to include the handler in the extension. It looks pretty specific to your project and I'm not sure why it is interesting for other people. But maybe I'm just missing an important point here. Let me know.<br />
<br />
Regards,<br />
  Philipp<br />

</div>
                    <div class="attribute-signature">
            <p><a href="http://www.mugo.ca/" title="http://www.mugo.ca">http://www.mugo.ca</a><br />
Mugo Web, eZ Partner in Vancouver, Canada</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.html" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg11201">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/philipp_kamps.html">Philipp Kamps</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../var/plain_site/storage/images/users/community/philipp_kamps/50596-6-eng-GB/philipp_kamps_small.html" width="66" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />16 June 2006</p>
        <p class="posts">Posts: 13</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Friday 29 August 2008 8:24:00 pm</p>

        <div class="attribute-long">I tried to add you as a member - but I don't know how to do it :(
</div>
                    <div class="attribute-signature">
            <p><a href="http://www.mugo.ca/" title="http://www.mugo.ca">http://www.mugo.ca</a><br />
Mugo Web, eZ Partner in Vancouver, Canada</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.html" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bgdark" id="msg11230">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/bin_liu2.html">Bin LIU</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../var/plain_site/storage/images/users/community/bin_liu2/20888-25-eng-GB/bin_liu_small.jpg" width="100" height="75"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />11 May 2007</p>
        <p class="posts">Posts: 15</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Monday 01 September 2008 10:56:24 am</p>

        <div class="attribute-long">Hi Philipp,<br />
<br />
Thanks for you reply. You use contentObjectAttribute-&gt;fromString( $value ); is a really good idea.<br />
<br />
forget the LaAbstractClass, I thought maybe it's a good example use the ini config. but just forget it. <br />
<br />
And could you please tell me if the update_eZ_node is in your roadmap ? and when ? Thanks a lot.<br />
<br />
Best,<br />
<br />
Bin
</div>
                    <div class="attribute-signature">
            <p>=== Freelance Expert Ezpublish ===</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.html" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg11231">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/bin_liu2.html">Bin LIU</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../var/plain_site/storage/images/users/community/bin_liu2/20888-25-eng-GB/bin_liu_small.jpg" width="100" height="75"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />11 May 2007</p>
        <p class="posts">Posts: 15</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Monday 01 September 2008 10:59:33 am</p>

        <div class="attribute-long">I tried to add you as a member - but I don't know how to do it :( <br />
<br />
And for this, I click the 'Register membership', and I think you have a buttun &quot;approve&quot; somewhere. 
</div>
                    <div class="attribute-signature">
            <p>=== Freelance Expert Ezpublish ===</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.html" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>
</table>

</div>



 

            <p>You need to be <a href="http://login.ez.no/login?return=http://projects.ez.no/">logged in</a> to post messages in the forums. New users may <a href="http://auth.ez.no/user/register">register here</a>.</p>
    
</div>
</div>
</div>



<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

<!-- Footer area: START -->
<div id="page-width6">
<div id="footer">

<address>Powered by <a href="http://ez.no/ezpublish" title="eZ Publish Content Management System">eZ Publish&reg; Content Management System.</a></address>
<address>Copyright &copy; 2007-2011 eZ Systems AS (except where otherwise noted). All rights reserved.</address>
</div>
</div>
<!-- Footer area: END -->

</div>
<!-- Complete page area: END -->

<!-- BEGIN GA tracker script -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24601020-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- END GA tracker script -->





</body>

<!-- Mirrored from projects.ez.no/data_import/forum/general/the_method_update_ez_node by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 08 Feb 2017 08:30:15 GMT -->
</html>
