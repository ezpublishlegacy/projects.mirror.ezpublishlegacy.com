<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>eZ Projects / bcfetchxml / Forum / General</title>
    <link>http://projects.ez.no/</link>
    <description></description>
    <language>en-GB</language>
    <managingEditor>community@ez.no (Administrator User)</managingEditor>
    <pubDate>Wed, 08 Feb 2017 03:59:14 +0000</pubDate>
    <lastBuildDate>Wed, 08 Feb 2017 03:59:14 +0000</lastBuildDate>
    <generator>eZ Components Feed dev (http://ezcomponents.org/docs/tutorials/Feed)</generator>
    <docs>http://www.rssboard.org/rss-specification</docs>
    <atom:link href="http://projects.ez.no/rss/feed/16984" rel="self" type="application/rss+xml"/>
    <item>
      <title>Re: BC Fetch XML Feedback</title>
      <link>http://projects.ez.no/bcfetchxml/forum/general/bc_fetch_xml_feedback/re_bc_fetch_xml_feedback</link>
      <description>Hi BC,&#13;
&#13;
I was implementing a XML file reader and I found your extension. The cache handling seems pretty nice. Regarding the XML handling I checked the simple XML php function and it only handles 1 level depth XMLs. So I implemented a XML to array reader of n levels using the DOMDocument class. Additionally I implement a timeout handling function so Apache does not create many processes if the XML file could not be downloaded. Let me know your comments and can you please check if we can update your operator functionality.&#13;
&#13;
&lt;code&gt;&#13;
function modify( $tpl, &$operatorName, &$operatorParameters, &$rootNamespace, &$currentNamespace, &$operatorValue, &$namedParameters )
    {        
		
        switch ( $operatorName )
        {
			case 'getRSS':
			{				
				$xmlCall =  $namedParameters['xml_url'];	&#13;
				$stringXml = $this -&gt; getContentURL($xmlCall);&#13;
				if ($stringXml) {&#13;
					$stringXml = trim($stringXml);&#13;
					$xml = new DOMDocument('1.0');&#13;
					$xml-&gt;formatOutput = true;					&#13;
					$xml_load = $xml-&gt;loadXML( $stringXml);	&#13;
					if ( $xml_load )&#13;
					{	&#13;
						$elementsbytag = $xml-&gt;getElementsByTagName($namedParameters['breaking_tag']);&#13;
						$error = $xml-&gt;getElementsByTagName( $namedParameters['error_tag'] );&#13;
						&#13;
						if ( $error -&gt; length )&#13;
						{&#13;
							eZLog::write("Bag request. Please review parameters:" . $xmlCall ,'weather.log','extension/aplweatherchannel/var/log');&#13;
							$errorMessage=true;&#13;
						}&#13;
					}&#13;
					else&#13;
					{						&#13;
						eZLog::write("XML couldn't be downloaded or has bad format:" . $xmlCall ,'weather.log','extension/aplweatherchannel/var/log');&#13;
						 $errorMessage=true;&#13;
					}	&#13;
				}&#13;
				else &#13;
				{&#13;
						eZLog::write("XML couldn't be downloaded or has bad format:" . $xmlCall ,'weather.log','extension/aplweatherchannel/var/log');&#13;
						 $errorMessage=true;&#13;
				}	&#13;
				&#13;
&#13;
				if ($errorMessage) {&#13;
					&#13;
					$operatorValue =  array();&#13;
				}else{&#13;
										&#13;
				&#13;
					$itemsArray = array();&#13;
					if( $namedParameters['offset'] &gt; $elementsbytag -&gt; length )&#13;
					{		&#13;
						$offset = 0;&#13;
					}&#13;
					else&#13;
					{&#13;
						$offset = $namedParameters['offset'];&#13;
					}	&#13;
						&#13;
					if( ($namedParameters['limit'] + $offset) &gt; $elementsbytag -&gt; length )&#13;
					{						&#13;
						$limit = $elementsbytag -&gt; length;&#13;
					}&#13;
					else&#13;
					{&#13;
						$limit = $namedParameters['limit'] + $offset;	&#13;
					}&#13;
					&#13;
					for( $i = $offset ; $i &lt; $limit ; $i++)&#13;
					{  &#13;
					   $itemsArray[] = $this -&gt; getchildrenRSS($elementsbytag -&gt; item($i) );&#13;
					}&#13;
					$operatorValue =  $itemsArray;						&#13;
				}&#13;
			&#13;
			}break;&#13;
			&#13;
		&#13;
       }&#13;
    }&#13;
	function getchildrenRSS($children_object)&#13;
	{&#13;
		&#13;
		foreach( $children_object -&gt; childNodes as $childNode )&#13;
		{&#13;
			if( get_class( $childNode ) == 'DOMText' )&#13;
			{&#13;
				if( !$childNode -&gt; hasChildNodes() )&#13;
				{&#13;
					if( !$childNode -&gt; isWhitespaceInElementContent() )	&#13;
						$childrenArray['value'] = $childNode -&gt; nodeValue; &#13;
				}&#13;
			}&#13;
			elseif( get_class( $childNode ) == 'DOMElement' )&#13;
			{&#13;
				$childrenArray['children'][] =  $this -&gt; getchildrenRSS( $childNode );&#13;
			}			&#13;
		}			&#13;
		&#13;
		if( $children_object -&gt; hasAttributes() )&#13;
		{			&#13;
			foreach( $children_object -&gt; attributes as $attrNode ) &#13;
			{&#13;
				//print_r( $attrNode -&gt; value);&#13;
				$childrenArray['@attributes'][$attrNode -&gt; name] = $attrNode -&gt; value;		&#13;
			}	&#13;
		}&#13;
		return $childrenArray;&#13;
    }&#13;
&#13;
	&#13;
	function getContentURL($url, $use_proxy = true)&#13;
	{&#13;
	  &#13;
		$ctx = stream_context_create(array('http' =&gt; array('timeout' =&gt; 3)));&#13;
		$content_string = file_get_contents($url,false, $ctx);&#13;
		 return trim($content_string); &#13;
	}&#13;
&#13;
&#13;
&lt;/code&gt; </description>
      <author>community@ez.no (Julian Mancera)</author>
      <guid>http://projects.ez.no/bcfetchxml/forum/general/bc_fetch_xml_feedback/re_bc_fetch_xml_feedback</guid>
      <pubDate>Tue, 22 Sep 2009 20:05:10 +0000</pubDate>
    </item>
    <item>
      <title>BC Fetch XML Feedback</title>
      <link>http://projects.ez.no/bcfetchxml/forum/general/bc_fetch_xml_feedback</link>
      <description>Hello!&#13;
&#13;
We are very proud to offer the BC Fetch XML extension,&#13;
http://projects.ez.no/bcfetchxml&#13;
&#13;
Please provide feedback to the community on how the extension works for you and any features you might think would be useful to add.&#13;
&#13;
If this extension is useful to you please write a positive review, http://projects.ez.no/bcfetchxml/reviews&#13;
&#13;
Cheers,&#13;
Brookins Consulting </description>
      <author>community@ez.no (Brookins Consulting)</author>
      <guid>http://projects.ez.no/bcfetchxml/forum/general/bc_fetch_xml_feedback</guid>
      <pubDate>Mon, 22 Jun 2009 17:17:21 +0000</pubDate>
    </item>
  </channel>
</rss>