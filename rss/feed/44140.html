<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>eZ Projects / ezless / Forum</title>
    <link>http://projects.ez.no/</link>
    <description></description>
    <language>en-GB</language>
    <managingEditor>community@ez.no (Administrator User)</managingEditor>
    <pubDate>Wed, 08 Feb 2017 04:22:24 +0000</pubDate>
    <lastBuildDate>Wed, 08 Feb 2017 04:22:24 +0000</lastBuildDate>
    <generator>eZ Components Feed dev (http://ezcomponents.org/docs/tutorials/Feed)</generator>
    <docs>http://www.rssboard.org/rss-specification</docs>
    <atom:link href="http://projects.ez.no/rss/feed/44140" rel="self" type="application/rss+xml"/>
    <item>
      <title>useOneFile does not work with complex LESS parsing</title>
      <link>http://projects.ez.no/ezless/forum/general/useonefile_does_not_work_with_complex_less_parsing</link>
      <description>Hello,&#13;
&#13;
Trying to use ezless with twitter bootstrap & useOneFile=true

The @import "..."; LESS include is ignored, because each CSS file sould be processed before a final merge (for now, the PHP code merge the CSS files first, and parse an unique CSS text at the end).&#13;
&#13;
Here is my code refactoring for solving that :&#13;
&#13;
&lt;code&gt;&#13;
private function generateTag( $files ){&#13;
        eZDebug::writeDebug($files, 'ezLessOperator::generateTag');&#13;
&#13;
	    $html = $cssContent = '';&#13;
&#13;
		$ini 		= eZINI::instance( 'ezless.ini' );&#13;
		$useOneFile = $ini-&gt;variable( 'ezlessconfig','useOneFile' );&#13;
&#13;
		// ToDo: siteaccess as parameter&#13;
		$bases   	= eZTemplateDesignResource::allDesignBases();&#13;
		$triedFiles = array();&#13;
&#13;
		$sys = eZSys::instance();&#13;
&#13;
		$path = $sys-&gt;cacheDirectory() . '/public/stylesheets';&#13;
&#13;
		require_once dirname( __FILE__ ) . '/../lib/lessphp/lessc.inc.php';&#13;
&#13;
        $packerLevel = $this-&gt;getPackerLevel();&#13;
		$less = new lessc();&#13;
		&#13;
		foreach( $files as $file){&#13;
			$match = eZTemplateDesignResource::fileMatch( $bases, '', 'stylesheets/'.$file, $triedFiles );&#13;
			$less-&gt;importDir = dirname( $match['path'] );&#13;
&#13;
            $content = file_get_contents( $match['path'] );&#13;
				&#13;
			try&#13;
			{&#13;
				$parsedContent = $less-&gt;parse( $content );&#13;
				$parsedContent = ezjscPacker::fixImgPaths( $parsedContent, $match['path'] );&#13;
				if( $packerLevel &gt; 1 )&#13;
				{&#13;
					$parsedContent = $this-&gt;optimizeCSS( $parsedContent, $packerLevel );&#13;
				}&#13;
				&#13;
				if( $useOneFile == "true" ){&#13;
					$cssContent = $cssContent . PHP_EOL . $parsedContent;&#13;
				}else{&#13;
					$file = md5(uniqid(mt_rand(), true)) . ".css";&#13;
					$file = $path . '/' . $file;&#13;
					$clusterFile = eZClusterFileHandler::instance( $file );&#13;
					$clusterFile-&gt;storeContents( $parsedContent, 'ezless', 'text/css' );&#13;
					eZURI::transformURI( $file, true );&#13;
					$html .= '&lt;link rel="stylesheet" type="text/css" href="' . $file . '" /&gt;' . PHP_EOL;&#13;
				}&#13;
				&#13;
			}&#13;
			catch( Exception $e )&#13;
			{&#13;
				eZDebug::writeError( $e-&gt;getMessage(), 'ezLessOperator for ' . $match['path'] );&#13;
			}&#13;
&#13;
		}&#13;
&#13;
		if( $useOneFile == "true" ){&#13;
&#13;
			try&#13;
			{&#13;
				$file = md5(uniqid(mt_rand(), true)) . ".css";&#13;
    			$file = $path . '/' . $file;&#13;
    			$clusterFile = eZClusterFileHandler::instance( $file );&#13;
    			$clusterFile-&gt;storeContents( $cssContent, 'ezless', 'text/css' );&#13;
    			eZURI::transformURI( $file, true );&#13;
    			$html = '&lt;link rel="stylesheet" type="text/css" href="' . $file . '" /&gt;' . PHP_EOL;&#13;
    		}&#13;
			catch( Exception $e )&#13;
			{&#13;
                eZDebug::writeError( $e-&gt;getMessage(), 'ezLessOperator parsing error' );&#13;
			}&#13;
		}&#13;
&#13;
		return $html;&#13;
	}&#13;
&lt;/code&gt;</description>
      <author>community@ez.no (gilles guirand)</author>
      <guid>http://projects.ez.no/ezless/forum/general/useonefile_does_not_work_with_complex_less_parsing</guid>
      <pubDate>Wed, 28 Mar 2012 15:36:52 +0000</pubDate>
    </item>
    <item>
      <title>Great news !</title>
      <link>http://projects.ez.no/ezless/forum/general/great_news</link>
      <description>This is a great news.&#13;
&#13;
eZPublish is the best for managing multi-sites and less is a perfect complement for css maintenance and modularity.&#13;
&#13;
Is this extension adding ezless_add or is there some other stuff inside ?&#13;
&#13;
I'll try this and report !&#13;
&#13;
Martin</description>
      <author>community@ez.no (H-Works Agency)</author>
      <guid>http://projects.ez.no/ezless/forum/general/great_news</guid>
      <pubDate>Wed, 14 Dec 2011 12:10:32 +0000</pubDate>
    </item>
  </channel>
</rss>