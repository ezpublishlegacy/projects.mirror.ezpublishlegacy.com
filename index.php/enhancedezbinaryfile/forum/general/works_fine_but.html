<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">



<!-- Mirrored from projects.ez.no/index.php/enhancedezbinaryfile/forum/general/works_fine_but by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 05 Feb 2017 22:04:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>                                                                                
<title>
            Works fine, but ..     /         General     /         Forum        
</title>

<meta http-equiv="Content-Language" content="en-GB" />
    <meta name="author" content="eZ Systems" />
    <meta name="copyright" content="eZ Systems" />
    <meta name="description" content="Content Management System" />
    <meta name="keywords" content="cms, publish, e-commerce, content management, development framework" />

<meta name="MSSmartTagsPreventParsing" content="TRUE" />
<meta name="generator" content="eZ Publish" />

<style type="text/css">
    @import url(../../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/core.css);
    @import url(../../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/pagelayout.css);
    @import url(../../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/classes.css);
    @import url(../../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/print.css) print;
</style>

<link type="text/css" rel="stylesheet" href="../../../../extension/ezprojects2007/design/ezprojects2007/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/ie5.css);    </style> <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/ie6lte.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/ie6.css);    </style> <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezprojects2007/design/ezprojects2007/stylesheets/gecko.css);</style>");--></script>

<script type="text/javascript" src="../../../../extension/ezprojects2007/design/ezprojects2007/javascripts/switch-width.js"></script>

<script type="text/javascript" src="../../../../extension/ezprojects2007/design/ezprojects2007/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../extension/ezprojects2007/design/ezprojects2007/javascripts/insertmedia.js"></script>
<script type="text/javascript" src="../../../../extension/ezprojects2007/design/ezprojects2007/javascripts/link-target.js"></script>

<script type="text/javascript" src="../../../../var/plain_site/cache/public/javascript/059cd8e3b9fa455a526077cbccc48048.js" charset="utf-8"></script>


</head>
<body onload="menuInit();">

<!-- Complete page area: START -->
<div id="page">

<!-- Header area: START -->
<div id="header">
<div id="header-insert">

<!-- User menu area: START -->
<div id="usermenu">

<div id="page-width1">

<div id="logo">
<h1><a href="../../../../index.html"><span class="hide">eZ Systems</span></a></h1>
</div>

<h2 id="slogan">Share your information</h2>

<p class="hide"><a href="#main">Skip to main content</a></p>

<hr class="hide" />
<div id="searchbox">
<form action="http://projects.ez.no/content/advancedsearch" method="get">

<div class="block">
<div class="element">
<input id="searchbutton" class="button" type="submit" value="Search" />
</div>

<div class="element searchstring">
    <label for="searchtext" class="hide">Search text:</label>
    <input id="searchtext" name="SearchText" type="text" size="12" />
    

    </div>

</div>
</form>
</div>

<hr class="hide" />
<h2 class="hide">User menu</h2>

<!-- User menu content: START -->
<ul>
            <li><a href="../../../user/register.html">Become a member of the eZ Community</a></li>
        <li><a href="../../../user/forgotpassword.html">Lost password?</a></li>
    
    <li>
    
    <script type="text/javascript">
    <!--
    if ( fixedSize )
    {
        document.write('<a id="setwidth" href="#" onclick="setWidth(); return false;">Dynamic width</a>');
    }
    else
    {
        document.write('<a id="setwidth" href="#" onclick="setWidth(); return false;">Fixed width</a>');
    }
    -->
    </script>
    
    </li>
    
            <li><a href="../../../user/login.html">Log in</a></li>
    </ul>
<!-- User menu content: END -->

</div>

</div>
<!-- User menu area: END -->

</div>
</div>
<!-- Header area: END -->

                    
<script type="text/javascript">
<!--
var menu = new Array();

menu[0] = [];
menu[1] = [];
menu[2] = [];
menu[3] = ['General', '/enhancedezbinaryfile/forum/general'];
menu[4] = ['Leaders', '/enhancedezbinaryfile/team/leaders', 'Members', '/enhancedezbinaryfile/team/members'];
menu[5] = [];
menu[6] = [];
menu[7] = [];

-->
</script>
<div id="menuborder">

<!-- Main menu area: START -->
<div id="menu" onmouseover="menuHover();" onmouseout="tryHideSubMenues();">

<div id="mainmenu" class="float-break">
<div id="page-width2">
    <ul id="mainmenulist" class="float-break">

    <li class="project" ><a href="../../../../enhancedezbinaryfile.html" onmouseover="switchSubMenu( this );">Enhanced eZ Binary File Type &nbsp;&nbsp;&gt;&gt;</a></li>
                        <li ><a href="../../../../enhancedezbinaryfile/news.html" onmouseover="switchSubMenu( this );">News</a></li>
                            <li ><a href="../../../../enhancedezbinaryfile/downloads.html" onmouseover="switchSubMenu( this );">Downloads</a></li>
                            <li class="current"><a href="../../../../enhancedezbinaryfile/forum.html" onmouseover="switchSubMenu( this );">Forum</a></li>
                            <li ><a href="../../../../enhancedezbinaryfile/team.html" onmouseover="switchSubMenu( this );">Team</a></li>
                            <li ><a href="../../../../enhancedezbinaryfile/subversion.html" onmouseover="switchSubMenu( this );">Source</a></li>
                            <li ><a href="../../../../enhancedezbinaryfile/gallery.html" onmouseover="switchSubMenu( this );">Gallery</a></li>
                            <li class="last"><a href="../../../../enhancedezbinaryfile/reviews.html" onmouseover="switchSubMenu( this );">Reviews</a></li>
        
    </ul>

</div>
</div>


<div id="submenu">
<div id="page-width3">
    <ul class="float-break">

                    
            
    <li class="last current"><a href="../../../../enhancedezbinaryfile/forum/general.html">General</a></li>

        

</ul>
</div>
</div>

<script type="text/javascript"><!--
document.getElementById('submenu').style.display = 'none';
--></script>

</div>
<!-- Main menu area: END -->

</div>

<hr class="hide" />
<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p>
                                    <a href="../../../content/view/full/2.html">ez projects</a>
                    
                        /
                            <a href="../../../enhancedezbinaryfile.html">enhancedezbinaryfile</a>
        
                        /
                            <a href="../../forum.html">forum</a>
        
                        /
                            <a href="../general.html">general</a>
        
                        /
                                        works fine, but ..
                    
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->

<div id="page-width5">
<div id="main" class="float-break">

<!-- Main area content: START -->




<div class="template-design area-main-full">
<div class="template-module content-view-full">
<div class="template-object class-forummessage">



<div id="top" class="attribute-heading">
    <h1>Works fine, but ..</h1>
</div>


    <p>You need to be <a href="../../../user/login.html">logged in</a> to post messages in the forums. New users may <a href="http://auth.ez.no/user/register">register here</a>.</p>


 



<div class="content-view-children">

<table class="forum list" cellspacing="0">

    




<tr class="bglight" id="msg13372">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/content_content.html">content content</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../index.html" width="" height=""  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />30 December 2008</p>
        <p class="posts">Posts: 3</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Tuesday 30 December 2008 3:39:54 pm</p>

        <div class="attribute-long">Something wrong with the encoding,<br />
For example, when I receive a letter with &quot;D&quot; the original &quot;Ė&quot; or &quot;E!t&quot; - &quot;Š&quot;<br />
How to fix this problem?
</div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>
    




<tr class="bgdark" id="msg13373">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/steven_e_bailey.html">Steven E Bailey</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../var/plain_site/storage/images/users/community/steven_e_bailey/32288-148-eng-GB/steven_e_bailey_small.jpg" width="100" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />27 April 2006</p>
        <p class="posts">Posts: 54</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Tuesday 30 December 2008 6:33:57 pm</p>

        <div class="attribute-long">You are using the 4.x version found here, right?  Not the 3.9 version, I hope... this is broken in the 3.9 version, I think - Marco Zinn noticed that umlauts didn't work in that version.<br />
<br />
The mail's encoding should be set by the kernel hack using eZTextCodec::internalCharset() at line 352 of collectinfo.php:<br />
<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Plain Text part of Message</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$message = &quot;--{$mime_boundary}\n&quot; .</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Content-Type: text/plain; charset=\&quot;&quot;.</span>

<span class="line">This&nbsp;--&gt;&nbsp;&nbsp;&nbsp;eZTextCodec::internalCharset() . &quot;\&quot;\n&quot; .</span>

<span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Content-Transfer-Encoding: 8bit\n\n&quot;;</span>

<span class="line"></span></pre><br />
<br />
The Š and Ė are utf-8?  If you run this code from your ez root directory:<br />
<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">&lt;?&nbsp;</span>

<span class="line">require_once 'autoload.php';</span>

<span class="line">echo eZTextCodec::internalCharset();</span>

<span class="line">?&gt;</span>

<span class="line"></span></pre><br />
<br />
Does it come back with utf-8 or an encoding that supports those characters?<br />
<br />
I'm assuming that these characters show up on the front-end of your site without any problem, and that should be getting the same encoding - in which case maybe it's your mail client?
</div>
                    <div class="attribute-signature">
            <p><a href="http://www.leidentech.com/" title="http://www.leidentech.com">http://www.leidentech.com</a><br />
eZPublishLegacy - eZ Publish Release Mirror | <a href="http://ezpublishlegacy.com/" title="http://ezpublishlegacy.com">http://ezpublishlegacy.com</a></p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg13376">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/content_content.html">content content</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../index.html" width="" height=""  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />30 December 2008</p>
        <p class="posts">Posts: 3</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Wednesday 31 December 2008 8:05:23 am</p>

        <div class="attribute-long">I use ez 4.x version. 	<br />
<br />
 <pre class="wordwrap"><span class="line"></span>

<span class="line">&lt;?&nbsp;</span>

<span class="line">require_once 'autoload.php';</span>

<span class="line">echo eZTextCodec::internalCharset();</span>

<span class="line">?&gt;</span>

<span class="line">&nbsp;</span></pre><br />
<br />
return utf-8; <br />
<br />
The standard feedback form works fine, no encoding problem. <br />
<br />
example standard feedback mail source:<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">MIME-Version: 1.0</span>

<span class="line">Content-Type: text/plain; charset=utf-8</span>

<span class="line">Content-Transfer-Encoding: 8bit</span>

<span class="line">Content-Disposition: inline</span>

<span class="line">User-Agent: eZ Publish, Version 4.0.1</span>

<span class="line">Status:&nbsp;&nbsp;&nbsp;</span>

<span class="line">X-EsetId: 37F89F2B5ADF2A6D28FE9F7C508867</span>

<span class="line"></span></pre><br />
<br />
enhancedezbinaryfile, mail source:<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">MIME-Version: 1.0</span>

<span class="line">Content-Type: multipart/mixed;boundary===Multipart_Boundary_507bfebd5ac2b9d5b7225126aa703526; charset=utf-8</span>

<span class="line">Content-Transfer-Encoding: 8bit</span>

<span class="line">Content-Disposition: inline</span>

<span class="line">User-Agent: eZ Publish, Version 4.0.1</span>

<span class="line">Status:&nbsp;&nbsp;&nbsp;</span>

<span class="line">X-EsetId: 37F89F2B5ADF2A6D28FE9F7C508867</span>

<span class="line">&nbsp;</span>

<span class="line">--==Multipart_Boundary_507bfebd5ac2b9d5b7225126aa703526</span>

<span class="line">Content-Type: text/plain; charset=&quot;utf-8&quot;</span>

<span class="line">Content-Transfer-Encoding: 8bit</span>

<span class="line"></span></pre><br />
	<br />
the mail client does well...
</div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bgdark" id="msg13394">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/steven_e_bailey.html">Steven E Bailey</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../var/plain_site/storage/images/users/community/steven_e_bailey/32288-148-eng-GB/steven_e_bailey_small.jpg" width="100" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />27 April 2006</p>
        <p class="posts">Posts: 54</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Saturday 03 January 2009 12:14:03 pm</p>

        <div class="attribute-long">The only thing I see different is the quotes around the utf-8 part for the text portion of the multipart mail.  That could be it, maybe...  although it's not intuitive to me.<br />
<br />
If you want to try it, then change line 364 of collectinfo.php from:<br />
<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">&quot;Content-Type: &quot; . $attacharray[2] . &quot;; charset=\&quot;&quot;. eZTextCodec::internalCharset() . &quot;\&quot;\n name=\&quot;&quot; .</span>

<span class="line"></span></pre><br />
to<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">&quot;Content-Type: &quot; . $attacharray[2] . &quot;; charset=&quot;. eZTextCodec::internalCharset() . &quot;\n name=\&quot;&quot; .</span>

<span class="line"></span></pre><br />
<br />
(remove the escaped quotes around the eZTextCodec::internalCharset() )<br />
<br />
If that works well (with the text and the attachment) I'll incorporate it into the code.<br />
<br />
Alternatively, if you can send me one of the messages as an attachment then I can try it here.
</div>
                    <div class="attribute-signature">
            <p><a href="http://www.leidentech.com/" title="http://www.leidentech.com">http://www.leidentech.com</a><br />
eZPublishLegacy - eZ Publish Release Mirror | <a href="http://ezpublishlegacy.com/" title="http://ezpublishlegacy.com">http://ezpublishlegacy.com</a></p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg13419">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/lucas_bourdalle.html">Lucas Bourdallé</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../index.html" width="" height=""  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />06 January 2009</p>
        <p class="posts">Posts: 3</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Tuesday 06 January 2009 6:36:09 pm</p>

        <div class="attribute-long">Hi Steven, <br />
Thanks a lot for your ez extension !<br />
As content content says, i think there is a problem with the mail encoding :<br />
For example, with chars é or è, i've got a C) or a C(<br />
I've made the previous modification you mentionned, and it seems nothing changes.<br />
Have you got any ideas to fix that ?<br />
<br />
Best regards,<br />
<br />
Lucas<br />
<br />
PS: I'm running on ez 4.0 system...
</div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bgdark" id="msg13442">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/steven_e_bailey.html">Steven E Bailey</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../var/plain_site/storage/images/users/community/steven_e_bailey/32288-148-eng-GB/steven_e_bailey_small.jpg" width="100" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />27 April 2006</p>
        <p class="posts">Posts: 54</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Thursday 08 January 2009 9:49:29 am</p>

        <div class="attribute-long">O.k forget taking the quotes out - I didn't think that would make a difference anyway.<br />
<br />
However, I took a close look at this and I'm not able to reproduce the problems - I'm using a stock ez401 installation and everything on my linux box (firefox, thunderbird, xterm and kedit/kate) is set to utf-8.   So, when I send a mail  with this as the xml block message and with a text file as an attachment containing these contents:<br />
<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">testtesttest</span>

<span class="line">&nbsp;</span>

<span class="line">&nbsp;ä, ü or ö</span>

<span class="line">é or è</span>

<span class="line">&quot;D&quot; the original &quot;Ė&quot; or &quot;E!t&quot; - &quot;Š&quot;</span>

<span class="line">&nbsp;</span>

<span class="line">testtesttest</span>

<span class="line"></span></pre><br />
<br />
That's exactly what I get back.<br />
<br />
Functionally, nothing is done with the uploaded file.  It is read in using eZFile::getContents (a wrapper for file_get_contents/fp) and converted to base64 so that mail programs can handle it.<br />
<br />
I guess this breaks down to three things:<br />
<br />
- If you cut and paste the contents to an xml field does it show up in your browser correctly?  Then your browser and site have the correct encoding.<br />
<br />
- Does the attached file show up in your mail program correctly if you have your mail program set up to open attachments automatically? If so then your mail client has the encoding set to what the encoding actually is.<br />
<br />
One potential problem that I can see is that if you have your site set in the i18n.ini to utf-8 and you send something with a different encoding it probably will confuse your mail program since the header is being set to whatever the Charset is in i18n.ini.  This still shouldn't have any effect on the attachment when opened as a file, although it might come out wrong if the attachment is opened automatically in your mail client.<br />
<br />
- Does the attachment itself show up correctly when opened in a text editor (or pdf viewer, etc.) that has the correct encoding? This should always happen since functionally the attachment shoud be a bit-for-bit copy of what was uploaded (which I've verified with md5sum).  If it doesn't show up correctly then your text editor really isn't the right encoding.
</div>
                    <div class="attribute-signature">
            <p><a href="http://www.leidentech.com/" title="http://www.leidentech.com">http://www.leidentech.com</a><br />
eZPublishLegacy - eZ Publish Release Mirror | <a href="http://ezpublishlegacy.com/" title="http://ezpublishlegacy.com">http://ezpublishlegacy.com</a></p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg13493">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/lucas_bourdalle.html">Lucas Bourdallé</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../index.html" width="" height=""  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />06 January 2009</p>
        <p class="posts">Posts: 3</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Monday 12 January 2009 6:26:52 pm</p>

        <div class="attribute-long">Hi,<br />
<br />
My environment is fully set to UTF-8.<br />
The encoding error seems appear with the $mail-&gt;setContentType function.<br />
After reading the doc (<a href="http://pubsvn.ez.no/doxygen/trunk/html/classeZMail.html#ac8ea2b85f149bd38ae1c56b36fdba0b)" title="http://pubsvn.ez.no/doxygen/trunk/html/classeZMail.html#ac8ea2b85f149bd38ae1c56b36fdba0b)">http://pubsvn.ez.no/doxygen/trunk...ml#ac8ea2b85f149bd38ae1c56b36fdba0b)</a> all you made seems ok... but not for me.<br />
<br />
I don't understand.<br />
<br />
If you have others ideas ? Thx<br />
<br />
Lucas<br />
<br />
PS: I try <br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">$mail-&gt;setContentType( &quot;multipart/mixed;boundary=$mime_boundary&quot;,eZTextCodec::internalCharset(),&quot;8bit&quot;,false );</span>

<span class="line"></span></pre><br />
but doesn't work.
</div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bgdark" id="msg13508">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/lucas_bourdalle.html">Lucas Bourdallé</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../index.html" width="" height=""  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />06 January 2009</p>
        <p class="posts">Posts: 3</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Tuesday 13 January 2009 5:41:28 pm</p>

        <div class="attribute-long"><pre class="wordwrap"><span class="line"></span>

<span class="line">- Does the attached file show up in your mail program correctly if you have your mail program set up to open attachments automatically? If so then your mail client has the encoding set to what the encoding actually is.</span>

<span class="line"></span></pre><br />
<br />
In fact, the error may be here. In Gmail, files are correctly attached but not in my mail program (Mail, i'm on os x). I've got :<br />
<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">--==Multipart_Boundary_5124c83585ccb15e07929500b867b98e</span>

<span class="line">Content-Type: image/gif; charset=utf-8</span>

<span class="line">name=image.gif</span>

<span class="line">Content-Transfer-Encoding: base64</span>

<span class="line">Content-Disposition: inline;</span>

<span class="line">filename=image.gif</span>

<span class="line">&nbsp;</span>

<span class="line">{Encrypted base64 file}==</span>

<span class="line"></span></pre><br />
(i've replace the following encryption image by {Encrypted base64 file} to not pollute the post.<br />
<br />
And, at the end of the message :<br />
<pre class="wordwrap"><span class="line"></span>

<span class="line">--==Multipart_Boundary_9961bddbea2ec9e3d978923acfa938b5--</span>

<span class="line">&nbsp;</span>

<span class="line">--=--</span>

<span class="line"></span></pre><br />
<br />
I think i'm close, can you give me a little help again ? :)<br />
Thanks<br />
<br />
Lucas
</div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg14040">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/steven_e_bailey.html">Steven E Bailey</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../var/plain_site/storage/images/users/community/steven_e_bailey/32288-148-eng-GB/steven_e_bailey_small.jpg" width="100" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />27 April 2006</p>
        <p class="posts">Posts: 54</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Saturday 07 February 2009 10:01:35 am</p>

        <div class="attribute-long">Sorry for the late reply, apparently I didn't get the notification.<br />
<br />
I'm not sure what your mail client is doing... and I don't know where it's getting the encrypted base64 from... but, can you cut and paste the block of base64 encoded text and decode it using base64_decode and save it in a file (image.gif)?  Is it the image that you attached?
</div>
                    <div class="attribute-signature">
            <p><a href="http://www.leidentech.com/" title="http://www.leidentech.com">http://www.leidentech.com</a><br />
eZPublishLegacy - eZ Publish Release Mirror | <a href="http://ezpublishlegacy.com/" title="http://ezpublishlegacy.com">http://ezpublishlegacy.com</a></p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bgdark" id="msg45847">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/dirk_bensel.html">Dirk Bensel</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../var/plain_site/storage/images/users/community/dirk_bensel/26183-12-eng-GB/dirk_bensel_small.jpg" width="75" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />18 May 2004</p>
        <p class="posts">Posts: 2</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Thursday 15 March 2012 12:10:13 pm</p>

        <div class="attribute-long">old version on ezp 3.6.3<br />
$mail-&gt;setContentType( &quot;multipart/mixed;boundary=$mime_boundary&quot;,false,false,false );<br />
<br />
my solution on ezp 3.10.1<br />
$mail-&gt;setContentType( &quot;multipart/mixed&quot;,false,false,false,$mime_boundary );<br />

</div>
                    <div class="attribute-signature">
            <p>---<br />
Kind regards, db</p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>    




<tr class="bglight" id="msg45874">
    
    <td class="info">
        <p class="author"><a href="../../../users/community/steven_e_bailey.html">Steven E Bailey</a></p>


                    <div class="attribute-image">

    
        
    
    <img src="../../../../var/plain_site/storage/images/users/community/steven_e_bailey/32288-148-eng-GB/steven_e_bailey_small.jpg" width="100" height="100"  border="0" alt="" title="" />
    
    
    </div>
        
        <p class="membersince">Member since:<br />27 April 2006</p>
        <p class="posts">Posts: 54</p>
    </td>

    
    <td class="message">
                    <form method="post" action="http://projects.ez.no/index.php/content/action">
                <div class="object-right">
                                                </div>
           </form>
       
        <p class="date">Friday 16 March 2012 10:59:44 pm</p>

        <div class="attribute-long">Great, Dirk.  Thanks for the tip.<br />
<br />
That's interesting.  Maybe the problem has been different parameters for the setContentType with different versions of ezpublish.<br />
<br />
Of course, it's been over a year (maybe even two) since I've touched  a 3.x installation.<br />
<br />

</div>
                    <div class="attribute-signature">
            <p><a href="http://www.leidentech.com/" title="http://www.leidentech.com">http://www.leidentech.com</a><br />
eZPublishLegacy - eZ Publish Release Mirror | <a href="http://ezpublishlegacy.com/" title="http://ezpublishlegacy.com">http://ezpublishlegacy.com</a></p>
            </div>
        
                                </td>
    <td class="buttons">
    <div class="button">
        <a href="#main"><img src="../../../../extension/ezprojects2007/design/ezprojects2007/images/button-move_up.gif" height="16" width="16" alt="Up" title="Jump to first message" /></a>
    </div>
    </td>
</tr>
</table>

</div>



 

            <p>You need to be <a href="../../../user/login.html">logged in</a> to post messages in the forums. New users may <a href="http://auth.ez.no/user/register">register here</a>.</p>
    
</div>
</div>
</div>



<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

<!-- Footer area: START -->
<div id="page-width6">
<div id="footer">

<address>Powered by <a href="http://ez.no/ezpublish" title="eZ Publish Content Management System">eZ Publish&reg; Content Management System.</a></address>
<address>Copyright &copy; 2007-2011 eZ Systems AS (except where otherwise noted). All rights reserved.</address>
</div>
</div>
<!-- Footer area: END -->

</div>
<!-- Complete page area: END -->

<!-- BEGIN GA tracker script -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24601020-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- END GA tracker script -->





</body>

<!-- Mirrored from projects.ez.no/index.php/enhancedezbinaryfile/forum/general/works_fine_but by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 05 Feb 2017 22:04:32 GMT -->
</html>
